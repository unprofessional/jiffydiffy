/* ---------- Diff containers ---------- */

/* Inherit font scale from AppShell -> apply to DiffView */
.diff-pane{
  /* match Editorâ€™s math */
  --mono-size: var(--code-font, 13px);
  --mono-line: calc(var(--code-line-height, 1.55) * var(--code-font, 13px));

  /* if these are used below, ensure they exist */
  --editor-pad-x: var(--editor-pad-x, 10px);
  --gutter-bg: var(--gutter-bg, #0f0f0f);
  --gutter-border: var(--gutter-border, #0000);
  --gutter-fg: var(--gutter-fg, #999);
}

/* Optional: set base mono font & size once for all rows */
.diff-pane,
.diff-pane .row,
.diff-pane .cell,
.diff-pane .gA,
.diff-pane .gB{
  font-family: var(--mono-font, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace);
  font-size: var(--mono-size);
  line-height: var(--mono-line);
}

.diff-wrap{
  font-family: var(--mono-font);
  border:1px solid #333;
  border-radius:6px;
  overflow:hidden;
}
.diff-header{
  background:#222; color:#fff; padding:6px 10px; font-weight:600;
}
@media (prefers-color-scheme: dark){
  .diff-header{ background:#1c1c1c; color:#fff; }
}

/* ---------- Two-pane layout (A | B) ---------- */
.two-pane{ background:transparent; }

/* rows & cells use the same mono style as editors */
.row{
  display:grid;
  grid-template-columns: 56px 1fr 56px 1fr; /* A-gutter | A-text | B-gutter | B-text */
  gap:0;
  font-family: var(--mono-font);
  font-size: var(--mono-size);
  line-height: var(--mono-line);
  white-space: pre-wrap;
  align-items: stretch;
}
.row + .row{ border-top:1px solid rgba(128,128,128,.25); }

/* gutters (line numbers) */
.gA,.gB{
  display:flex; align-items:center; justify-content:flex-end;
  font-variant-numeric: tabular-nums;
  padding:0 var(--editor-pad-x); min-width:48px;
  background: var(--gutter-bg);
  border-right:1px solid var(--gutter-border);
  color: var(--gutter-fg);
  font-size: calc(var(--mono-size) * .95);
}

/* cells */
.cell{ display:block; padding:4px var(--editor-pad-x); }

/* equal */
.equal .cellA,.equal .cellB{ background: var(--eq-bg); color: var(--eq-fg); }

/* delete */
.delete .cellA{ background: var(--del-bg); color: var(--del-fg); }
.delete .cellB{ background: transparent; }

/* insert */
.insert .cellB{ background: var(--ins-bg); color: var(--ins-fg); }
.insert .cellA{ background: transparent; }

/* replace pair */
.replace .cellA{ background: var(--del-bg); color: var(--del-fg); }
.replace .cellB{ background: var(--ins-bg); color: var(--ins-fg); }

/* word-level tokens */
.token-del{ background: var(--token-del); border-radius:2px; }
.token-ins{ background: var(--token-ins); border-radius:2px; }

/* subtle vertical divider between panes */
.row > :nth-child(3){ border-left:1px solid rgba(128,128,128,.25); }

/* ---------- Diff view basics (moved from editor.css) ---------- */
.diff-view{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.hunk{
  border:1px solid var(--panel-border-muted);
  border-radius:6px;
  overflow:hidden;
  background:var(--hunk-bg);
}
.hunk.active{
  box-shadow: 0 0 0 2px #2d7ef733 inset;
}
.hunk-header{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 8px;
  background:var(--hunk-header-bg);
}
.hunk-title{
  flex:1;
  font-weight:600;
  cursor:pointer;
}
.hunk-body{
  max-height: 360px;
  overflow:auto;
  background:var(--hunk-body-bg);
  padding:6px 8px;
}
.hline{ margin:0; white-space:pre-wrap; }
.hline.op-insert{ background: var(--ins-bg); }
.hline.op-delete{ background: var(--del-bg); }
.hline.op-equal { background:transparent; }
