/* ---------- Editors (share mono tokens) ---------- */
/* Bridge global scale â†’ local editor vars */
.editor {
  --mono-size: var(--code-font, 13px);
  --editor-row: calc(var(--code-font, 13px) * var(--code-line-height, 1.55));

  display: grid;
  grid-template-rows: auto 1fr;
  gap: 6px;
}

/* header */
.editor-header{
  display:flex;
  align-items:center;
  justify-content:space-between;

  font-weight:700;
  letter-spacing:.02em;
  text-transform:uppercase;
  font-size:12px;
  opacity:.8;
}

/* Editor body */
.editor-body{
  display:grid;
  grid-template-columns:44px 1fr;
  gap:0;
  border:1px solid var(--panel-border);
  border-radius:6px;
  overflow:hidden;
  background:var(--panel-bg);
  height: var(--editor-h);
}

/* text column wrapper (prevents min-content shrinking & hosts the ruler) */
.ln-wrap{
  position:relative;
  height:100%;
  min-width:0;
}

/* --------- Gutter --------- */
.ln-gutter{
  background:var(--gutter-bg);
  color:var(--gutter-fg);
  font-family: var(--mono-font, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace);
  font-variant-numeric: tabular-nums;
  padding:var(--editor-pad-y) var(--editor-pad-x) var(--editor-pad-y) calc(var(--editor-pad-x) - 2px);
  height:100%;
  overflow:hidden;        /* no own scrollbar */
}
.ln{
  height: var(--editor-row);
  line-height: var(--editor-row);
}

/* --------- Textarea --------- */
.ln-textarea{
  box-sizing:border-box;
  width:100%;
  height:100%;
  resize:none;
  overflow:auto;
  scrollbar-gutter: stable;

  font-family: var(--mono-font, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace);
  font-size: var(--mono-size);
  line-height: var(--editor-row);   /* integer px */
  padding: var(--editor-pad-y) var(--editor-pad-x);
  border:none;
  outline:none;

  background: var(--editor-bg);
  color: var(--editor-fg);

  white-space: pre-wrap;
  word-break: break-word;
}

/* --------- Hidden ruler (mirror) --------- */
.ln-ruler{
  position:absolute;
  inset:0;
  box-sizing:border-box;
  padding: var(--editor-pad-y) var(--editor-pad-x);
  overflow:auto;                    /* same scroll box as textarea */
  scrollbar-gutter: stable;
  visibility:hidden;
  pointer-events:none;

  font-family: var(--mono-font, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace);
  font-size: var(--mono-size);
  line-height: var(--editor-row);   /* integer px */
  white-space: pre-wrap;
  word-break: break-word;
}

/* header actions */
.editor-actions{
  display:flex;
  align-items:center;
  gap:6px;
}
.editor-actions .spacer{ width:6px; }

.link-btn,
.nav-btn,
.collapse-btn,
.jump-btn{
  font: inherit;
  border: 1px solid #5555;
  background: transparent;
  padding: 2px 6px;
  border-radius: 6px;
  cursor: pointer;
}
.link-btn.active{
  background: #2d7ef733;
  border-color: #2d7ef7aa;
}

/* ghost highlights over text area */
.ln-ghosts{
  position:absolute;
  inset:0;
  padding: var(--editor-pad-y) var(--editor-pad-x); /* match textarea/ruler */
  pointer-events:none;
  will-change: transform;
}
.ln-ghost{
  position:absolute;
  left:0; right:0;
  background: var(--ghost-bg);
  border-top: 1px dashed var(--ghost-border);
  border-bottom: 1px dashed var(--ghost-border);
}
