/* ---------- Editors (share mono tokens) ---------- */
.editor{
  display:grid;
  grid-template-rows:auto 1fr;
  gap:6px;
}
.editor-header{
  font-weight:700;
  letter-spacing:.02em;
  text-transform:uppercase;
  font-size:12px;
  opacity:.8;
}

/* Use integer pixel row height to avoid selection gaps. */
:root{
  --editor-row: 20px;         /* pick an integer; adjust to taste */
}

.editor-body{
  display:grid;
  grid-template-columns:44px 1fr;
  gap:0;
  border:1px solid #555;
  border-radius:6px;
  overflow:hidden;
  background:#fff;
  height: var(--editor-h);
}

/* text column wrapper (prevents min-content shrinking & hosts the ruler) */
.ln-wrap{
  position:relative;
  height:100%;
  min-width:0;
}

/* --------- Gutter --------- */
.ln-gutter{
  background:#f0f0f0;
  color:#555;
  font-family: var(--mono-font);
  font-variant-numeric: tabular-nums;
  padding:6px 8px 6px 6px;
  height:100%;
  overflow:hidden;        /* no own scrollbar */
}
.ln{
  height: var(--editor-row);
  line-height: var(--editor-row);
}

/* --------- Textarea --------- */
.ln-textarea{
  box-sizing:border-box;
  width:100%;
  height:100%;
  resize:none;
  overflow:auto;
  scrollbar-gutter: stable;

  font-family: var(--mono-font);
  font-size: var(--mono-size);
  line-height: var(--editor-row);   /* integer px */
  padding:6px 8px;                  /* must match ruler */
  border:none;
  outline:none;

  background:#fff;
  color:#111;

  white-space: pre-wrap;
  word-break: break-word;
}

/* --------- Hidden ruler (mirror) --------- */
.ln-ruler{
  position:absolute;
  inset:0;
  box-sizing:border-box;
  padding:6px 8px;                  /* must match textarea padding */
  overflow:auto;                    /* same scroll box as textarea */
  scrollbar-gutter: stable;
  visibility:hidden;
  pointer-events:none;

  font-family: var(--mono-font);
  font-size: var(--mono-size);
  line-height: var(--editor-row);   /* integer px */
  white-space: pre-wrap;
  word-break: break-word;
}

@media (prefers-color-scheme: dark){
  .editor-body{ border-color:#444; background:#151515; }
  .ln-gutter{ background:#1e1e1e; color:#aaa; }
  .ln-textarea{ background:#0f0f0f; color:#e6e6e6; }
}

/* header actions */
.editor-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.editor-actions{
  display:flex;
  align-items:center;
  gap:6px;
}
.editor-actions .spacer{ width:6px; }

.link-btn,
.nav-btn,
.collapse-btn,
.jump-btn{
  font: inherit;
  border: 1px solid #5555;
  background: transparent;
  padding: 2px 6px;
  border-radius: 6px;
  cursor: pointer;
}
.link-btn.active{
  background: #2d7ef733;
  border-color: #2d7ef7aa;
}

/* ghost highlights over text area */
.ln-ghosts{
  position:absolute;
  inset:0;
  padding:6px 8px;        /* match .ln-textarea / .ln-ruler padding */
  pointer-events:none;
  will-change: transform; /* smooth translate on scroll */
}
.ln-ghost{
  position:absolute;
  left:0; right:0;
  background: #ffd54a30; /* subtle amber */
  border-top: 1px dashed #ffcc00a0;
  border-bottom: 1px dashed #ffcc00a0;
}

/* diff view basics */
.diff-view{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.hunk{
  border:1px solid #4444;
  border-radius:6px;
  overflow:hidden;
  background:#fff;
}
.hunk.active{
  box-shadow: 0 0 0 2px #2d7ef733 inset;
}
.hunk-header{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 8px;
  background:#f7f7f7;
}
.hunk-title{
  flex:1;
  font-weight:600;
  cursor:pointer;
}
.hunk-body{
  max-height: 360px;
  overflow:auto;
  background:#fafafa;
  padding:6px 8px;
}
.hline{ margin:0; white-space:pre-wrap; }
.hline.op-insert{ background:#e7ffea; }
.hline.op-delete{ background:#ffe9e9; }
.hline.op-equal { background:transparent; }
@media (prefers-color-scheme: dark){
  .hunk{ background:#0f0f0f; border-color:#333; }
  .hunk-header{ background:#151515; }
  .hunk-body{ background:#111; }
  .hline.op-insert{ background:#0d2b12; }
  .hline.op-delete{ background:#2b0d0d; }
}
